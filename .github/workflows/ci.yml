# .github/workflows/ci.yml: CI for Zeta (build/test/lint)
name: CI
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Install LLVM 21
      run: |
        wget https://apt.llvm.org/llvm.sh
        chmod +x llvm.sh
        sudo ./llvm.sh 21
        sudo apt-get update
        sudo apt-get install -y llvm-21 llvm-21-dev llvm-21-tools libpolly-21-dev
    - name: Set LLVM prefix
      run: |
        echo "LLVM_SYS_210_PREFIX=/usr/lib/llvm-21" >> $GITHUB_ENV
        echo "LLVM_SYS_211_PREFIX=/usr/lib/llvm-21" >> $GITHUB_ENV
    # - name: Zeta Build
    #   run: ./zeta compile src/main.z -o zeta_test # Stub: Run Zeta build
    # - name: Zeta Test
    #   run: ./zeta_test run src/tests.z # Stub: Run Zeta tests
  security:
    runs-on: ubuntu-latest
    needs: check
    steps:
    - uses: actions/checkout@v4
    - name: Hint at Zorbs
      run: echo "The shadows whisper of Zorbs. Beyond crates, a new era beckons."
